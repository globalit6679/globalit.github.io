<!DOCTYPE html>
<html>
<head>
    <title>라즈베리파이 수업</title>
    <style>
        
    </style>
</head>
<body>
    <h2>아두이노 서보모터 제어하기</h2>
    <h5>2020.07.24 김규성 수업</h5>
    <div class="arduino">
    <h3>[Arduino]</h3>
    <h3>
        #include [Servo.h] <br>
         Servo myservoH;<!--create servo object to control a servo--><br>
            Servo myservoV;<br>
            int posH = 90;<br>
            int posV = 90;<br>
            void setup() {<br>
            
              &nbsp;&nbsp;&nbsp;&nbsp;myservoH.attach(8); <!--//서보모터를 쉴드의 8번에 연결한다.--><br>
            
              &nbsp;&nbsp;&nbsp;&nbsp;myservoV.attach(7); <!--//서보모터를 쉴드의 7번에 연결한다.--><br>
            
            
            
              &nbsp;&nbsp;&nbsp;&nbsp;Serial.begin(9600);<br>
            
            }<br>
            
            
            
            void loop() {<br>
            
              &nbsp;&nbsp;&nbsp;&nbsp;while (Serial.available() > 0) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long value = Serial.parseInt();<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int backUpH = posH;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int backUpV = posV;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch (value) {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 1:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posH -= 5;<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
            
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 2:<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posH += 5;<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
            
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 3:<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posV -= 5;<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
            
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 4:<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posV += 5;<br>
            
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (posH<0 || posH>180) {<br>
            
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posH=backUpH;<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (posV<0 || posV>180) {<br>
            
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posV=backUpV;<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myservoH.write(posH);<br>
            
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myservoV.write(posV);<br>
            
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
            
            &nbsp;&nbsp;&nbsp;&nbsp;} <br>
    </h3><br>
        </div>
        
        
        <div class="python">
    <h3>[Python]</h3>
    <h3>
        import cv2<br>

import serial<br>

arduino = serial.Serial('COM12',9600)<br>

cap = cv2.VideoCapture(0)  <br>

while(True):  <br>

    <!--# Capture frame-by-frame  <br>-->

    &nbsp;&nbsp;&nbsp;&nbsp;ret, frame = cap.read()  <br>

    

    &nbsp;&nbsp;&nbsp;&nbsp;cv2.imshow('frame',frame)<br>



   &nbsp;&nbsp;&nbsp;&nbsp;key = cv2.waitKey(1) & 0xFF<br>

    

    if key == ord('q'): <br> 

        &nbsp;&nbsp;&nbsp;&nbsp;break<br>

    elif key ==ord('a'):  <br>        <!--#왼쪽-->

        &nbsp;&nbsp;&nbsp;&nbsp;arduino.write(b'1\n')<br>

        &nbsp;&nbsp;&nbsp;&nbsp;print(b'1\n')<br>

    elif key ==ord('d'):    <br>      <!--#오른쪽-->

        &nbsp;&nbsp;&nbsp;&nbsp;arduino.write(b'2\n')<br>

        &nbsp;&nbsp;&nbsp;&nbsp;print(b'2\n')<br>

    elif key ==ord('w'):   <br>       <!--#위-->

        &nbsp;&nbsp;&nbsp;&nbsp;arduino.write(b'3\n')<br>

        &nbsp;&nbsp;&nbsp;&nbsp;print(b'3\n')<br>

    elif key ==ord('s'):      <br>    <!--#아래-->

        &nbsp;&nbsp;&nbsp;&nbsp;arduino.write(b'4\n')<br>

        &nbsp;&nbsp;&nbsp;&nbsp;print(b'4\n')<br>

<!--# When everything done, release the capture  -->

cap.release()  <br>

cv2.destroyAllWindows()  <br>


        </h3>
        </div>
        <div class="box">
            <a href=arduino2.html>NEXT</a>
        </div>
</body>
        </html>
